<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>HgCdTe Zinc-Blende Structure Visualization</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/3Dmol.js/2.0.0/3Dmol-min.js"></script>
</head>
<body>
  <div id="container" style="height: 400px; width: 100%; position: relative;"></div>
  
  <script>
    // Wait for document to load
    document.addEventListener('DOMContentLoaded', function() {
      // Create viewer
      let element = $('#container');
      let config = { backgroundColor: 'white' };
      let viewer = $3Dmol.createViewer(element, config);
      
      // Define lattice constant for HgCdTe
      const a = 6.46; // Angstroms
      
      // Create model
      let m = viewer.addModel();
      
      // Define atom properties
      const atomTypes = {
        "Hg": { color: "silver", radius: 1.49 * 0.3 },
        "Cd": { color: "goldenrod", radius: 1.44 * 0.3 },
        "Te": { color: "darkred", radius: 1.37 * 0.3 }
      };
      
      // Create a 2x2x2 supercell
      for (let i = 0; i < 2; i++) {
        for (let j = 0; j < 2; j++) {
          for (let k = 0; k < 2; k++) {
            // Base position for this unit cell
            const base = [i * a, j * a, k * a];
            
            // Add metal atoms (Hg/Cd) at FCC positions
            const fccPositions = [
              [0, 0, 0],
              [0, 0.5, 0.5],
              [0.5, 0, 0.5],
              [0.5, 0.5, 0]
            ];
            
            fccPositions.forEach(pos => {
              // Randomly assign Hg or Cd (70/30 ratio)
              const element = Math.random() < 0.7 ? "Hg" : "Cd";
              const props = atomTypes[element];
              
              m.addAtom({
                elem: element,
                x: base[0] + pos[0] * a,
                y: base[1] + pos[1] * a,
                z: base[2] + pos[2] * a,
                color: props.color,
                radius: props.radius
              });
            });
            
            // Add Te atoms
            const tePositions = [
              [0.25, 0.25, 0.25],
              [0.25, 0.75, 0.75],
              [0.75, 0.25, 0.75],
              [0.75, 0.75, 0.25]
            ];
            
            tePositions.forEach(pos => {
              const props = atomTypes["Te"];
              
              m.addAtom({
                elem: "Te",
                x: base[0] + pos[0] * a,
                y: base[1] + pos[1] * a,
                z: base[2] + pos[2] * a,
                color: props.color,
                radius: props.radius
              });
            });
          }
        }
      }
      
      // Add bonds
      m.addBonds({
        threshold: 3.0,
        colormode: "color1"
      });
      
      // Add unit cell
      viewer.addUnitCell({
        a: a,
        b: a,
        c: a,
        alpha: 90,
        beta: 90,
        gamma: 90,
        box: {color: "black", linewidth: 2.0}
      });
      
      // Set display style
      viewer.setStyle({}, {sphere: {scale: 0.7}});
      
      // Set initial view
      viewer.setView([-20, -20, -20, 20, 20, 20]);
      viewer.zoomTo();
      viewer.rotate(30, "y");
      viewer.rotate(20, "x");
      
      // Render the scene
      viewer.render();
    });
  </script>
</body>
</html>
